OSMAPOSLParameters :=

objective function type:= PoissonLogLikelihoodWithLinearModelForMeanAndProjData
PoissonLogLikelihoodWithLinearModelForMeanAndProjData Parameters:= 
	input file := ../NEMA_IQ/nema_proj_f1g1d0b0.hs
	maximum absolute segment number to process := -1

		; very awkward way to specify PSF in both forward and back projector
		
projector pair type := Matrix
  Projector Pair Using Matrix Parameters :=
  Matrix type := Ray Tracing
  Ray tracing matrix parameters :=
   ; use multiple (almost) parallel LORs for every bin in the sinogram 
   ; to avoid discretisation artefacts
   number of rays in tangential direction to trace for each bin:= 5
   ; you could disable some symmetries if you have enough memory
   ; this would for instance allow you to increase the number of subsets
   ; do_symmetry_90degrees_min_phi:=0
  End Ray tracing matrix parameters :=
  End Projector Pair Using Matrix Parameters :=

Bin Normalisation type := Chained
	Chained Bin Normalisation Parameters:=
  Bin Normalisation to apply first:= From ProjData
          Bin Normalisation From ProjData :=
           normalisation projdata filename:= ../NEMA_IQ/atten_sino.hs
       End Bin Normalisation From ProjData:=

	Bin Normalisation to apply second:= From ProjData
		Bin Normalisation From ProjData :=
             normalisation projdata filename:=  ../NEMA_IQ/20170809_NEMA_UCL_normfactors.hs
        End Bin Normalisation From ProjData:=
		
 END Chained Bin Normalisation Parameters:=

  additive sinogram := ../total_additive_4.hs
	
	recompute sensitivity := 0
	use subset sensitivities:= 1
	sensitivity filename:=  at_sens.hv
	subset sensitivity filenames:= ./senses/sens_%d.hv
	zoom :=  1

end PoissonLogLikelihoodWithLinearModelForMeanAndProjData Parameters:=
enforce initial positivity condition:=  1
number of subsets:= 21
number of subiterations:= 21
save estimates at subiteration intervals:= 21
output filename prefix := output_proj
END := 
